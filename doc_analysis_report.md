# EESLISM Go版 文書更新差分分析レポート

## 概要
現在のdocフォルダの文書は、EESLISM 7.2版準拠となっているが、Go言語版への移植過程で追加された機能や変更点が反映されていない。本レポートでは、現在のコードベースと文書の差分を分析し、更新が必要な項目を特定する。

## 現在のコードベース分析結果

### 1. 基本情報
- **現在のバージョン**: Go言語版 (C言語版 EESLISM 7.2ベース)
- **移植年**: 2023年
- **Go言語バージョン**: 1.23.0
- **総ファイル数**: 147個のGoファイル

### 2. 新機能・追加機能

#### 2.1 WebAssembly対応
- **現状**: READMEにWebAssembly対応の記述あり
- **文書での言及**: なし
- **詳細**: `GOOS=js GOARCH=wasm go build -o eeslism.wasm` でWebAssembly版をビルド可能

#### 2.2 テスト機能の追加
- **現状**: 複数のテストファイルが存在
  - `main_test.go`: 標準プランのテスト
  - `u_day_test.go`: 日付計算のテスト
  - `u_sun_test.go`: 太陽位置計算のテスト
- **文書での言及**: なし

#### 2.3 実装されている主要機能

##### 太陽光発電システム (PV)
- **構造体**: `PVCA`, `PV`, `PVWALL`, `PVWALLCAT`
- **機能**: 
  - 太陽電池容量、発電効率計算
  - 温度補正係数計算
  - 設置方式別温度計算
  - 結晶系・アモルファス系対応
- **文書での記述**: 一部記述あり（EESLISM 6.6で追加と記載）

##### PCM（潜熱蓄熱材）
- **構造体**: `PCM`, `PCMSTATE`
- **機能**: 
  - PCMの相変化計算
  - 蓄熱・放熱計算
  - 収束計算対応
- **文書での記述**: format/README.mdで「Ver7.2時点では未定義」と記載されているが、実際には実装済み

##### デシカント空調機
- **構造体**: `DESICA`, `DESI`
- **機能**: 
  - バッチ式デシカント空調機
  - 熱湿気同時交換計算
  - シリカゲル特性計算
- **文書での記述**: 実装されているが詳細な説明なし

##### 太陽熱集熱器
- **構造体**: `COLLCA`, `COLL`
- **機能**: 
  - 水熱源・空気熱源対応
  - 集熱効率計算
  - 相当外気温度計算
- **文書での記述**: 基本的な記述あり

##### 蓄熱槽
- **構造体**: `STANKCA`, `STANK`
- **機能**: 
  - 縦型蓄熱槽
  - 内蔵熱交換器対応
  - バッチ操作対応
  - 温度成層計算
- **文書での記述**: 基本的な記述あり

##### VAVシステム
- **構造体**: `VAVCA`, `VAV`, `OMVAVCA`, `OMVAV`
- **機能**: 
  - 変風量制御
  - 変水量制御
  - 最大・最小風量制御
- **文書での記述**: EESLISM 7.0で改良されたと記載

##### 全熱交換器
- **構造体**: `THEXCA`, `THEX`
- **機能**: 
  - 顕熱・全熱交換
  - 温度効率・エンタルピ効率計算
- **文書での記述**: 基本的な記述あり

##### 気化冷却器
- **構造体**: `EVACCA`, `EVAC`
- **機能**: 
  - 直接・間接気化冷却
  - 多層計算対応
- **文書での記述**: 詳細な説明なし

### 3. Go言語版特有の機能・変更点

#### 3.1 パフォーマンス
- **実行速度**: C言語版とほぼ同等（約14秒/標準モデル）
- **メモリ管理**: ガベージコレクション対応

#### 3.2 クロスプラットフォーム対応
- **Windows**: `GOOS=windows GOARCH=amd64`
- **WebAssembly**: `GOOS=js GOARCH=wasm`
- **その他**: Go言語がサポートする全プラットフォーム

#### 3.3 モジュール管理
- **go.mod**: Go Modulesによる依存関係管理
- **外部ライブラリ**: 
  - `github.com/akamensky/argparse`: コマンドライン引数解析
  - `golang.org/x/exp`: 実験的機能
  - `gotest.tools`: テスト支援

### 4. 文書化が不足している項目

#### 4.1 新機能
1. **WebAssembly対応**
   - ブラウザでの実行方法
   - 制限事項
   
2. **テスト機能**
   - テストの実行方法
   - テストカバレッジ

3. **Go言語版特有の機能**
   - ビルド方法の詳細
   - 依存関係の管理
   - デプロイメント方法

#### 4.2 実装済み機能の詳細
1. **PCM（潜熱蓄熱材）**
   - 入力データ形式
   - 計算方法
   - 出力データ形式

2. **気化冷却器**
   - 機器仕様の定義方法
   - 計算アルゴリズム

3. **デシカント空調機の詳細**
   - シリカゲル特性の設定方法
   - バッチ運転の制御方法

#### 4.3 入力データ形式
1. **format/README.md**の更新
   - PCMの入力形式（「未定義」から実装済みに変更）
   - 新機能の入力形式追加

2. **新しい機器タイプ**
   - 気化冷却器の入力形式
   - デシカント空調機の詳細設定

### 5. 推奨される文書更新項目

#### 5.1 緊急度：高
1. **index.md**の更新
   - Go言語版の特徴追記
   - バージョン情報の更新
   - 移植完了年の正確な記載

2. **format/README.md**の修正
   - PCMの「未定義」記述の削除
   - 実装済み機能の正確な記載

#### 5.2 緊急度：中
1. **新章の追加**
   - Go言語版特有の機能説明
   - WebAssembly対応の説明
   - テスト機能の説明

2. **既存章の更新**
   - 各機器の詳細仕様更新
   - 入力データ形式の詳細化

#### 5.3 緊急度：低
1. **サンプルファイルの説明**
   - 新しいサンプルの追加説明
   - 実行方法の詳細化

2. **トラブルシューティング**
   - Go言語版特有の問題と解決方法

## 結論

現在のdocフォルダの文書は、EESLISM 7.2版の基本機能については概ね記述されているが、Go言語版への移植に伴う新機能や変更点が反映されていない。特に、PCMが「未定義」とされているにも関わらず実際には実装済みである点や、WebAssembly対応、テスト機能などの新機能が全く記述されていない点が問題である。

優先的に更新すべき項目を特定し、段階的に文書の更新を行うことを推奨する。