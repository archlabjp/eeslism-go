# TREE（樹木定義）

## 概要
TREE（Tree）は、建物周辺の樹木による日射遮蔽効果を定義するデータセットです。樹木の幹と葉部の詳細な形状をモデル化することで、季節変化を含む日射遮蔽、蒸散による冷却効果、風環境への影響を正確にシミュレーションできます。緑化計画、省エネルギー設計、快適な外部環境の創出において重要な役割を果たします。

## データ形式
```
TREE
    <樹木名>
        treetype=<樹木タイプ>
        x=<X座標> y=<Y座標> z=<Z座標>
        W1=<幹太さ> W2=<葉部下面幅> W3=<葉部中央幅> W4=<葉部上面幅>
        H1=<幹高さ> H2=<葉部下側高さ> H3=<葉部上側高さ>
    ;
    ... 繰り返し
*
```

## パラメータ説明

| パラメータ | 単位 | 説明 | デフォルト値 | 参照 |
|:---|:---|:---|:---|:---|
| 樹木名 | - | 樹木の識別名 | - | 必須 |
| 樹木タイプ | - | 樹木の基本形状タイプ | - | 必須 |
| X座標 | m | 幹部下面中心のX座標 | - | 必須 |
| Y座標 | m | 幹部下面中心のY座標 | - | 必須 |
| Z座標 | m | 幹部下面中心のZ座標（地盤高） | - | 必須 |
| 幹太さ | m | 幹の直径 | - | 必須 |
| 葉部下面幅 | m | 葉部下端の幅 | - | 必須 |
| 葉部中央幅 | m | 葉部中央の幅（最大幅） | - | 必須 |
| 葉部上面幅 | m | 葉部上端の幅 | - | 必須 |
| 幹高さ | m | 幹部の高さ | - | 必須 |
| 葉部下側高さ | m | 葉部下半分の高さ | - | 必須 |
| 葉部上側高さ | m | 葉部上半分の高さ | - | 必須 |

## 樹木タイプ一覧

| タイプ | 説明 | 形状特徴 | 適用樹種例 |
|:---|:---|:---|:---|
| `treeA` | 標準的な広葉樹形状 | 円錐台状の葉部 | ケヤキ、サクラ、カエデ |
| `treeB` | 針葉樹形状 | 細長い円錐形 | スギ、ヒノキ、マツ |
| `treeC` | 球状樹形 | 球形に近い葉部 | クスノキ、シイ |

## 樹木形状の定義

### 幹部（Trunk）
- **位置**: (x, y, z) を中心とする円柱
- **寸法**: 直径W1、高さH1
- **特性**: 日射を完全遮蔽

### 葉部（Canopy）
葉部は上下2段の円錐台で構成：

#### 下段（Lower Canopy）
- **下端幅**: W2（幹の上端）
- **上端幅**: W3（葉部中央）
- **高さ**: H2
- **形状**: 円錐台

#### 上段（Upper Canopy）
- **下端幅**: W3（葉部中央）
- **上端幅**: W4（葉部上端）
- **高さ**: H3
- **形状**: 円錐台

## 使用例

### 基本的な樹木設定
```
TREE
    MapleTree1
        treetype=treeA
        x=10.0 y=15.0 z=0.0
        W1=0.8 W2=3.0 W3=6.0 W4=2.0
        H1=3.0 H2=4.0 H3=3.0 ;
    
    PineTree1
        treetype=treeB
        x=25.0 y=20.0 z=0.0
        W1=0.6 W2=1.5 W3=2.0 W4=0.5
        H1=2.0 H2=6.0 H3=4.0 ;
*
```

### 樹木群の設定
```
TREE
    StreetTree1
        treetype=treeA
        x=5.0 y=30.0 z=0.0
        W1=0.5 W2=2.0 W3=4.0 W4=1.5
        H1=2.5 H2=3.0 H3=2.5 ;
    
    StreetTree2
        treetype=treeA
        x=15.0 y=30.0 z=0.0
        W1=0.5 W2=2.0 W3=4.0 W4=1.5
        H1=2.5 H2=3.0 H3=2.5 ;
    
    StreetTree3
        treetype=treeA
        x=25.0 y=30.0 z=0.0
        W1=0.5 W2=2.0 W3=4.0 W4=1.5
        H1=2.5 H2=3.0 H3=2.5 ;
*
```

### 大型樹木の設定
```
TREE
    GiantOak
        treetype=treeA
        x=50.0 y=50.0 z=0.0
        W1=2.0 W2=8.0 W3=15.0 W4=5.0
        H1=5.0 H2=8.0 H3=7.0 ;
    
    OldCamphor
        treetype=treeC
        x=100.0 y=80.0 z=2.0
        W1=3.0 W2=10.0 W3=18.0 W4=12.0
        H1=6.0 H2=10.0 H3=8.0 ;
*
```

### 地形変化のある敷地
```
TREE
    HillsideTree1
        treetype=treeA
        x=30.0 y=40.0 z=5.0
        W1=0.8 W2=3.5 W3=7.0 W4=2.5
        H1=4.0 H2=5.0 H3=4.0 ;
    
    ValleyTree1
        treetype=treeB
        x=60.0 y=70.0 z=-2.0
        W1=0.7 W2=2.0 W3=3.0 W4=1.0
        H1=3.0 H2=7.0 H3=5.0 ;
*
```

## 樹種別の設定指針

### 落葉広葉樹（ケヤキ、サクラ等）
```
TREE
    DeciduousTree
        treetype=treeA
        W1=0.6 W2=2.5 W3=5.0 W4=2.0
        H1=3.0 H2=4.0 H3=3.0 ;
*
```
- **特徴**: 夏季は日射遮蔽、冬季は落葉により日射透過
- **形状**: 中央が膨らんだ円錐台形状

### 常緑針葉樹（スギ、ヒノキ等）
```
TREE
    EvergreenConifer
        treetype=treeB
        W1=0.4 W2=1.0 W3=1.5 W4=0.3
        H1=2.0 H2=8.0 H3=6.0 ;
*
```
- **特徴**: 年間を通じて日射遮蔽効果
- **形状**: 細長い円錐形状

### 常緑広葉樹（クスノキ、シイ等）
```
TREE
    EvergreenBroadleaf
        treetype=treeC
        W1=1.0 W2=4.0 W3=8.0 W4=6.0
        H1=4.0 H2=6.0 H3=4.0 ;
*
```
- **特徴**: 年間を通じて安定した日射遮蔽
- **形状**: 球形に近い葉部

## 日射遮蔽効果の計算

### 遮蔽メカニズム
1. **幹部**: 完全遮蔽（透過率0%）
2. **葉部**: 部分遮蔽（透過率は葉密度による）
3. **季節変化**: 落葉樹は冬季の透過率増加

### 透過率の設定
| 樹種分類 | 夏季透過率 | 冬季透過率 |
|:---|:---|:---|
| 落葉広葉樹 | 10-30% | 70-90% |
| 常緑針葉樹 | 20-40% | 20-40% |
| 常緑広葉樹 | 15-35% | 15-35% |

## 環境効果の評価

### 日射遮蔽効果
- **夏季冷房負荷削減**: 建物への直達日射の遮蔽
- **眩しさ軽減**: 窓面への日射制御
- **地表面温度低下**: 地面への日射遮蔽

### 蒸散冷却効果
- **気温低下**: 葉からの水分蒸散による冷却
- **湿度調整**: 周辺環境の湿度制御
- **ヒートアイランド緩和**: 都市部の気温上昇抑制

### 風環境改善
- **風速調整**: 樹木による風の減速・方向変化
- **乱流抑制**: 建物周辺の風環境改善

## 緑化計画での活用

### 建物配置との関係
```
TREE
    SouthSideShade
        treetype=treeA
        x=0.0 y=-10.0 z=0.0  !  建物南側
        W1=0.8 W2=3.0 W3=6.0 W4=2.0
        H1=3.0 H2=4.0 H3=3.0 ;
*
```

### 駐車場の緑化
```
TREE
    ParkingShade1
        treetype=treeA
        x=20.0 y=10.0 z=0.0
        W1=0.6 W2=2.5 W3=5.0 W4=2.0
        H1=2.5 H2=3.5 H3=3.0 ;
*
```

### 歩道の街路樹
```
TREE
    StreetTree_A
        treetype=treeA
        x=5.0 y=50.0 z=0.0
        W1=0.4 W2=1.5 W3=3.0 W4=1.0
        H1=2.0 H2=2.5 H3=2.0 ;
*
```

## 設計上の考慮事項

### 樹木選定
1. **気候適応性**: 地域の気候に適した樹種選択
2. **成長特性**: 将来の成長を考慮した配置
3. **維持管理**: 剪定・管理の容易さ
4. **根系**: 建物基礎への影響回避

### 配置計画
1. **日射制御**: 効果的な日射遮蔽位置
2. **風環境**: 風通しとのバランス
3. **景観**: 美しい緑化空間の創出
4. **安全性**: 倒木リスクの考慮

## 季節変化の考慮

### 落葉樹の年間変化
- **春季**: 新緑による徐々の遮蔽効果増加
- **夏季**: 最大遮蔽効果
- **秋季**: 紅葉と徐々の透過率増加
- **冬季**: 落葉による日射取得

### 常緑樹の特性
- **年間**: 安定した遮蔽効果
- **成長**: 徐々の樹冠拡大

## 出力データ

樹木に関する以下の項目が出力されます：
- 各時刻の日射遮蔽率
- 建物各面への遮蔽効果
- 地表面への影面積
- 透過日射量

## 関連データセット

- [OBS](OBS.md): 建物等の障害物
- [POLYGON](POLYGON.md): 複雑形状の緑化要素
- [COORDNT](COORDNT.md): 座標変換・日射計算
- [SUNBRK](SUNBRK.md): 建物付属の日除け

## 注意事項

1. **実測データ**: 実際の樹木寸法に基づく設定
2. **成長予測**: 将来の樹木成長を考慮した計画
3. **季節変化**: 落葉樹の季節による透過率変化
4. **維持管理**: 剪定による形状変化の考慮
5. **気象条件**: 強風・積雪等による影響評価