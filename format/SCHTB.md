# SCHTB（スケジュールテーブル定義）

## 概要
SCHTB（Schedule Table）は、一日の設定値・切替スケジュール、および季節・曜日の定義を行うデータセットです。時刻に応じた温度設定、機器の運転モード切替、季節区分、曜日分類を詳細に定義することで、建物の運用スケジュールを現実的にモデル化できます。エネルギー管理、快適性制御、省エネ運転の基盤となる重要な機能です。

## データ形式
```
SCHTB
    -v <設定値名> <時刻>-(<値>)-<時刻> <時刻>-(<値>)-<時刻> ... ;
    -s <切替名> <時刻>-(<モード>)-<時刻> <時刻>-(<モード>)-<時刻> ... ;
    -ssn <季節名> <開始月/日>-<終了月/日> <開始月/日>-<終了月/日> ... ;
    -wkd <曜日名> <曜日> <曜日> ... <曜日> ;
    ... 繰り返し
*
```

## パラメータ説明

| パラメータ | 説明 | 設定値 | 参照 |
|:---|:---|:---|:---|
| 設定値名 | 数値スケジュールの識別名 | 任意の文字列 | -v時必須 |
| 切替名 | モード切替スケジュールの識別名 | 任意の文字列 | -s時必須 |
| 季節名 | 季節区分の識別名 | 任意の文字列 | -ssn時必須 |
| 曜日名 | 曜日グループの識別名 | 任意の文字列 | -wkd時必須 |
| 時刻 | 時分（HHMM形式） | 0000-2400 | スケジュール定義時必須 |
| 値 | 設定値（温度、流量等） | 数値 | -v時必須 |
| モード | 切替モード名 | 任意の文字列 | -s時必須 |
| 開始月/日 | 期間開始日（MM/DD形式） | 01/01-12/31 | -ssn時必須 |
| 終了月/日 | 期間終了日（MM/DD形式） | 01/01-12/31 | -ssn時必須 |
| 曜日 | 曜日コード | Hol,Sun,Mon,Tue,Wed,Thu,Fri,Sat | -wkd時必須 |

## 定義タイプ一覧

| タイプ | 説明 | 用途 | 例 |
|:---|:---|:---|:---|
| `-v` | 設定値スケジュール | 温度、流量等の数値制御 | 室温設定、風量制御 |
| `-s` | 切替スケジュール | 運転モードの切替 | ON/OFF、冷房/暖房 |
| `-ssn` | 季節設定 | 年間の季節区分 | 冬季、夏季、中間期 |
| `-wkd` | 曜日設定 | 曜日グループ分け | 平日、週末、祝日 |

## 使用例

### 基本的な温度スケジュール
```
SCHTB
    -v OfficeTemp_Weekday
        0600-(18.0)-0800 0800-(22.0)-1800 1800-(20.0)-2200 2200-(16.0)-0600 ;
    
    -v OfficeTemp_Weekend
        0000-(16.0)-0800 0800-(20.0)-1800 1800-(18.0)-2400 ;
    
    -v ResidentialTemp
        0600-(18.0)-0700 0700-(20.0)-0900 0900-(18.0)-1700 1700-(22.0)-2300 2300-(18.0)-0600 ;
*
```

### 機器運転スケジュール
```
SCHTB
    -s HVACOperation
        0000-(OFF)-0700 0700-(ON)-1800 1800-(SETBACK)-2200 2200-(OFF)-2400 ;
    
    -s LightingControl
        0000-(OFF)-0700 0700-(AUTO)-1800 1800-(ON)-2200 2200-(OFF)-2400 ;
    
    -s VentilationMode
        0000-(MIN)-0800 0800-(NORMAL)-1700 1700-(MIN)-2400 ;
*
```

### 季節・曜日定義
```
SCHTB
    -ssn Winter 11/1-3/31 ;
    -ssn Summer 6/1-9/30 ;
    -ssn Inter 4/1-5/31 10/1-10/31 ;
    
    -wkd Weekday Mon Tue Wed Thu Fri ;
    -wkd Weekend Sat Sun Hol ;
    -wkd Holiday Hol ;
*
```

### 複合的なオフィススケジュール
```
SCHTB
    -v WinterOfficeTemp_WD
        0000-(16.0)-0700 0700-(20.0)-0800 0800-(22.0)-1200 1200-(23.0)-1300 1300-(22.0)-1800 1800-(20.0)-2200 2200-(16.0)-2400 ;
    
    -v WinterOfficeTemp_WE
        0000-(16.0)-0900 0900-(20.0)-1700 1700-(18.0)-2400 ;
    
    -v SummerOfficeTemp_WD
        0000-(28.0)-0700 0700-(26.0)-0800 0800-(25.0)-1200 1200-(24.0)-1300 1300-(25.0)-1800 1800-(26.0)-2200 2200-(28.0)-2400 ;
    
    -s OfficeHVAC_WD
        0000-(OFF)-0630 0630-(PREHEAT)-0800 0800-(AUTO)-1800 1800-(SETBACK)-2200 2200-(OFF)-2400 ;
    
    -s OfficeHVAC_WE
        0000-(OFF)-0800 0800-(AUTO)-1700 1700-(OFF)-2400 ;
*
```

### 住宅の詳細スケジュール
```
SCHTB
    -v ResidentialHeating_WD
        0000-(18.0)-0600 0600-(20.0)-0800 0800-(18.0)-1700 1700-(22.0)-2300 2300-(20.0)-2400 ;
    
    -v ResidentialHeating_WE
        0000-(18.0)-0800 0800-(22.0)-2300 2300-(20.0)-2400 ;
    
    -s DHWOperation
        0000-(TIMER)-0600 0600-(ON)-0800 0800-(TIMER)-1700 1700-(ON)-2300 2300-(TIMER)-2400 ;
    
    -s VentilationSchedule
        0000-(AUTO)-0600 0600-(HIGH)-0800 0800-(AUTO)-1800 1800-(HIGH)-2200 2200-(AUTO)-2400 ;
*
```

## 時刻指定の詳細

### 時刻形式
- **HHMM形式**: 0000（0時0分）～2400（24時0分）
- **連続性**: 前の時刻の終了時刻が次の開始時刻
- **日跨ぎ**: 2400を超える場合は翌日扱い

### スケジュール区間
```
0800-(22.0)-1800
```
- 8時00分から18時00分まで22.0℃に設定

### 複数区間の定義
```
0600-(18.0)-0800 0800-(22.0)-1800 1800-(20.0)-2400
```
- 6時～8時: 18.0℃
- 8時～18時: 22.0℃  
- 18時～24時: 20.0℃

## 季節定義の詳細

### 基本的な季節区分
```
-ssn Winter 12/1-2/28 ;
-ssn Summer 6/1-8/31 ;
-ssn Inter 3/1-5/31 9/1-11/30 ;
```

### 複数期間の指定
```
-ssn Inter 4/1-5/31 10/1-11/30 ;
```
中間期を春（4月～5月）と秋（10月～11月）に分けて定義

### 地域特性の考慮
```
-ssn Winter_Hokkaido 10/15-4/30 ;
-ssn Winter_Kyushu 12/15-2/28 ;
```

## 曜日定義の詳細

### 基本的な曜日グループ
```
-wkd Weekday Mon Tue Wed Thu Fri ;
-wkd Weekend Sat Sun ;
-wkd Holiday Hol ;
```

### 特殊な曜日グループ
```
-wkd BusinessDay Mon Tue Wed Thu Fri ;
-wkd RestDay Sat Sun Hol ;
-wkd FullWeek Mon Tue Wed Thu Fri Sat Sun ;
```

## インライン定義

### %s記法による任意場所での定義
```
%s -v QuickTemp 0800-(22.0)-1800 ;
%s -s QuickMode 0800-(ON)-1800 ;
```

### 利用場面
- 他のデータセット内での即座定義
- 一時的なスケジュール設定
- テスト用の簡易設定

## 省エネルギー設定例

### ピークカット対応
```
SCHTB
    -v SummerPeakCut
        0000-(26.0)-1300 1300-(28.0)-1600 1600-(26.0)-2400 ;
    
    -s PeakCutMode
        0000-(NORMAL)-1300 1300-(PEAKCUT)-1600 1600-(NORMAL)-2400 ;
*
```

### 夜間電力活用
```
SCHTB
    -s NightPowerMode
        0000-(NIGHT)-0800 0800-(DAY)-2200 2200-(NIGHT)-2400 ;
    
    -v NightHeating
        2200-(25.0)-0800 0800-(20.0)-2200 ;
*
```

## 設計上の注意事項

1. **時刻の連続性**: 24時間をすべてカバーする設定
2. **季節の網羅性**: 年間365日をすべて季節に分類
3. **現実的な設定値**: 実際の運用に即した温度・モード設定
4. **省エネ配慮**: エネルギー効率を考慮したスケジュール

## デバッグとテスト

### スケジュール確認
1. **時系列グラフ**: 設定値の時間変化を可視化
2. **季節移行**: 季節変更日の動作確認
3. **曜日切替**: 曜日による適切な切替

### 出力データでの検証
- スケジュール値の実際の適用状況
- エネルギー消費パターンとの整合性
- 快適性指標との関係

## 関連データセット

- [SCHNM](SCHNM.md): スケジュール名定義での参照
- [WEEK](WEEK.md): 週間カレンダーとの連携
- [RESI](RESI.md): 居住者スケジュールでの活用
- [AAPL](AAPL.md): 照明・機器スケジュールでの活用
- [VENT](VENT.md): 換気スケジュールでの活用
- [CONTL](CONTL.md): 制御ロジックでの参照