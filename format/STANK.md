# STANK（蓄熱槽）

## 概要
STANK（Storage Tank：蓄熱槽）は、太陽熱集熱器や排熱回収装置などで得られた熱エネルギーを蓄積し、必要時に放出する熱貯蔵装置です。EESLISM Go版では、縦型蓄熱槽の温度成層現象や内蔵熱交換器、バッチ操作などの詳細なモデル化が可能です。

## データ形式

### 機器仕様（EQPCAT）
```
*EQPCAT
STANK
カタログ名 形状 槽分割・流入出口パラメータ 容量 側面熱損失係数 上面熱損失係数 底面熱損失係数 混合係数
```

### システム構成要素（SYSCMP）
```
*SYSCMP
STANK 機器名 カタログ名 [バッチ操作フラグ]
```

## パラメータ説明

| パラメータ | 単位 | 説明 |
|------------|------|------|
| カタログ名 | - | 蓄熱槽の識別名 |
| 形状 | - | 'C': 縦型（円筒形）、その他の形状も将来対応予定 |
| 槽分割・流入出口パラメータ | - | 分割数、流入口・流出口位置の定義文字列 |
| 容量 | m³ | 蓄熱槽の総容量 |
| 側面熱損失係数 | W/K | 側面からの熱損失係数 |
| 上面熱損失係数 | W/K | 上面からの熱損失係数 |
| 底面熱損失係数 | W/K | 底面からの熱損失係数 |
| 混合係数 | - | 温度成層の混合を表す係数 |
| バッチ操作フラグ | - | 'F': 給水、'D': 排出、'-': 停止、'n': バッチ操作なし |

## 槽分割・流入出口パラメータの詳細

### 基本形式
```
分割数,流入口数,流入口位置1,流入口位置2,...,流出口数,流出口位置1,流出口位置2,...
```

### 内蔵熱交換器がある場合
```
分割数,流入口数,流入口位置1:内蔵熱交換器フラグ,流入口位置2,...
```

内蔵熱交換器フラグ：
- 'y': 内蔵熱交換器あり
- 'n': 内蔵熱交換器なし

## 使用例

### 基本的な蓄熱槽
```
*EQPCAT
STANK
Tank_500L C 10,2,3,8,2,2,9 0.5 2.0 1.0 1.0 0.1

*SYSCMP
STANK HotWaterTank Tank_500L n
```

### 内蔵熱交換器付き蓄熱槽
```
*EQPCAT
STANK
Tank_IHX C 15,3,2:y,8:n,12:y,3,3,7,13 1.0 3.0 1.5 1.5 0.05

*SYSCMP
STANK SolarTank Tank_IHX n
```

### バッチ操作対応蓄熱槽
```
*EQPCAT
STANK
Tank_Batch C 8,1,4,1,6 0.3 1.5 0.8 0.8 0.2

*SYSCMP
STANK BatchTank Tank_Batch F
```

## 温度成層モデル

### 基本概念
蓄熱槽内では、温度差による密度差により自然に温度成層が形成されます：
- **上層**: 高温水（密度小）
- **下層**: 低温水（密度大）
- **境界層**: 温度勾配のある中間層

### 計算方法
各分割層について以下の熱収支式を解きます：
```
ρ × V × Cp × dT/dt = Qin - Qout - Qloss + Qmix
```

ここで：
- ρ: 水の密度 [kg/m³]
- V: 分割層の容量 [m³]
- Cp: 水の比熱 [J/(kg·K)]
- Qin: 流入熱量 [W]
- Qout: 流出熱量 [W]
- Qloss: 熱損失 [W]
- Qmix: 混合による熱移動 [W]

## 内蔵熱交換器

### 種類
1. **コイル型**: 螺旋状のコイル
2. **多管型**: 複数の直管
3. **プレート型**: 板状の熱交換器

### 計算方法
内蔵熱交換器の熱交換量は以下で計算：
```
Q = KA × (Tw - Tt)
```

ここで：
- KA: 熱通過率×伝熱面積 [W/K]
- Tw: 配管内流体温度 [℃]
- Tt: 槽内水温度 [℃]

### 設定方法
- **温度効率指定**: 熱交換器の温度効率を直接指定
- **KA指定**: 熱通過率×伝熱面積を指定
- **寸法指定**: 内径と長さから自動計算

## バッチ操作

### 操作モード
- **給水モード（F）**: 下部から冷水を給水
- **排出モード（D）**: 上部から温水を排出
- **停止モード（-）**: 給排水停止
- **通常モード（n）**: バッチ操作なし

### 制御方法
- **時刻制御**: 指定時刻での自動切替
- **温度制御**: 槽内温度による制御
- **外部信号**: 他システムからの制御信号

## 熱損失計算

### 熱損失の種類
1. **側面熱損失**: 槽側面からの熱損失
2. **上面熱損失**: 槽上面からの熱損失
3. **底面熱損失**: 槽底面からの熱損失

### 計算式
```
Qloss = KAside × (Tt - Tenv) + KAtop × (Ttop - Tenv) + KAbtm × (Tbtm - Tenv)
```

## 出力データ

蓄熱槽の状態として以下が出力されます：
- 各分割層の温度
- 流入・流出温度
- 蓄熱量・放熱量
- 熱損失量
- 内蔵熱交換器の熱交換量
- 槽内平均温度

## 設計上の注意点

### サイズ設定
- **容量**: 必要蓄熱量と設置スペースのバランス
- **高さ/直径比**: 温度成層形成に適した比率（2:1～4:1程度）
- **分割数**: 計算精度と計算時間のバランス

### 断熱設計
- **断熱厚さ**: 熱損失を最小化する適切な厚さ
- **断熱材**: 高温対応の断熱材選定
- **熱橋**: 配管貫通部等の熱橋対策

### 配管設計
- **流入口位置**: 温度成層を乱さない位置
- **流出口位置**: 必要温度の水を取出せる位置
- **配管径**: 適切な流速の確保

## システム連携

### 太陽熱集熱システム
- **直接接続**: 集熱器から蓄熱槽への直接接続
- **間接接続**: 熱交換器を介した接続
- **制御**: 集熱温度と槽内温度の差による制御

### 給湯システム
- **瞬間式**: 蓄熱槽からの予熱水を瞬間式給湯器で加熱
- **貯湯式**: 蓄熱槽を給湯用貯湯槽として直接利用
- **循環式**: 循環ポンプによる温水循環

### 暖房システム
- **床暖房**: 低温水による床暖房
- **パネルヒーター**: 温水パネルによる暖房
- **空調機**: 温水コイルによる暖房

## 省エネルギー効果

### 熱の有効利用
- **時間シフト**: 昼間の集熱を夜間に利用
- **負荷平準化**: ピーク負荷の分散
- **効率向上**: システム全体の効率向上

### 補助熱源の削減
- **化石燃料**: ガス・石油の使用量削減
- **電力**: 電気ヒーターの使用量削減
- **CO2**: 温室効果ガス排出量削減

## メンテナンス

### 定期点検項目
- **水質**: 腐食・スケール・細菌の確認
- **断熱**: 断熱材の劣化確認
- **配管**: 漏水・腐食の確認
- **制御**: 制御機器の動作確認

### 清掃・交換
- **水抜き**: 定期的な水の入替
- **洗浄**: 槽内の洗浄・消毒
- **部品交換**: 劣化部品の交換