# PCM（潜熱蓄熱材）

## 概要
PCM（Phase Change Material：潜熱蓄熱材）は、相変化時の潜熱を利用して熱エネルギーを蓄積・放出する材料です。EESLISM Go版では、壁体内や家具内に組み込まれたPCMの熱的挙動をシミュレーションできます。

## データ形式
```
*PCM
    <PCM名称>
        [ Condl=<value> ]
        [ Conds=<value> ]
        [ Crol=<value> ]
        [ Cros=<value> ]
        [ Ql=<value> ]
        [ Tl=<value> ]
        [ Ts=<value> ]
        [ Tp=<value> ]
        [ Ctype=<value> ]
        [ DivTemp=<value> ]
        [ -iterate ]
        [ -pcmnode ]
    ;
    ... 繰り返し
*
```

### パラメータ説明

| パラメータ | 単位 | 説明 | デフォルト値 |
|:---|:---|:---|:---|
| PCM名称 | - | PCM材料の識別名。必須。 | |
| Condl | W/(m·K) | 液相状態での熱伝導率 | `FNAN` |
| Conds | W/(m·K) | 固相状態での熱伝導率 | `FNAN` |
| Crol | J/m³K | 液相状態での容積比熱 | `FNAN` |
| Cros | J/m³K | 固相状態での容積比熱 | `FNAN` |
| Ql | J/m³ | 潜熱量 | `FNAN` |
| Tl | ℃ | 液体から凝固が始まる温度 | `FNAN` |
| Ts | ℃ | 固体から融解が始まる温度 | `FNAN` |
| Tp | ℃ | 見かけの比熱のピーク温度 | `FNAN` |
| Ctype | - | 見かけの比熱の特性曲線番号 | 2 (二等辺三角形) |
| DivTemp | - | 比熱数値積分時の温度分割数 | 1 |
| -iterate | - | 収束計算を行う場合に指定 | `false` |
| -pcmnode | - | PCM温度を節点温度で計算する場合に指定 | `false` (平均温度) |


## 使用例

### 基本的なPCM定義
```
*PCM
    ParaffinWax28
        Condl=0.15 Conds=0.20 Crol=2000000 Cros=1800000
        Ql=180000 Ts=26 Tl=30 Tp=28 ;
*
```

### 収束計算ありのPCM
```
*PCM
    PCM_HighPerf
        Condl=0.18 Conds=0.22 Ql=200000
        Ts=24 Tl=26 Tp=25
        -iterate ;
*
```

## 壁体での使用方法

PCMを壁体に組み込む場合は、WALL定義でPCM名称を指定します：

```
*WALL
wall_with_pcm
3
concrete 0.15
PCM_layer ParaffinWax28 0.02
insulation 0.10
```

## 計算方法

### 相変化の判定
- **融解過程**: 温度が融解温度を超えた場合
- **凝固過程**: 温度が凝固温度を下回った場合
- **相変化中**: 融解温度と凝固温度の間で潜熱を考慮

### 熱容量の計算
相変化中の見かけの熱容量は、潜熱と温度幅から計算されます：
```
C_apparent = C_sensible + L / ΔT
```

### 収束計算
収束計算フラグが'y'の場合、PCMの相変化による非線形性を考慮した反復計算が実行されます。

## 出力データ

PCMの状態は以下の項目で出力されます：
- PCM温度
- 液相率
- 蓄熱量
- 放熱量
- 相変化状態

## 注意事項

1. **温度範囲**: 融解温度 ≤ ピーク温度 ≤ 凝固温度の関係を満たす必要があります
2. **収束性**: 収束計算を有効にすると計算時間が増加しますが、精度が向上します
3. **材料特性**: 実際のPCM材料の物性値を正確に入力することが重要です
4. **厚さ**: PCM層の厚さは壁体定義で指定します

## 参考文献

PCMの物性値については、以下を参考にしてください：
- 各PCMメーカーのカタログ値
- 建築材料の熱物性データベース
- 学術論文での実測値