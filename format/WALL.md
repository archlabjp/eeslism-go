# WALL（壁体構成）

## 概要
WALL（壁体構成）は、建物の外壁、内壁、屋根、床などの壁体の熱的特性を定義するためのデータ形式です。EESLISM Go版では、多層構造の壁体、集熱器、太陽電池、放射暖冷房パネルなどの複雑な壁体システムをシミュレーションできます。

## データ形式
```
WALL
    [wbmlist=<filename>]
    <ewname>
    [\<C\>]
    [ Ei=<ei> ] 
    [ Eo=<eo> ] 
    [ as=<as> ] 
    [ type=<type> ] 
    [ tra=<tra> ]
    [ Ksu=<ksu> ]
    [ Ksd=<ksd> ]
    [ Ru=<ru> ]
    [ Rd=<rd> ]
    [ fcu=<fcu> ]
    [ fcd=<fcd> ]
    [ Kc=<kc> ]
    [ Esu=<esu> ]
    [ Esd=<esd> ]
    [ Eg=<eg> ]
    [ Eb=<eb> ]
    [ ag=<ag> ]
    [ ta=<ta> ]
    [ tnxt=<tnxt>]
    [ t=<t> ]
    [ KHD=<khd> ]
    [ KPD=<kpd> ]
    [ KPM=<kpm> ]
    [ KPA=<kpa> ]
    [ EffInv=<effinv> ]
    [ apmax=<apmax> ]
    [ ap=<ap>]
    [ Rcoloff=<rcoloff> ]
    <layer> <layer> ･･･････････
    （外表面、隣室側、室内側） 屋根、天井のとき
    （室内側、外表面、隣室側） 部位無指定、外壁、内壁、床のとき
    ;
    <ewname> ･････ ; 以下繰り返し
    .
    .
*
```

### パラメータ説明

#### 基本パラメータ

| パラメータ | 単位 | 説明 | デフォルト値 |
|:---|:---|:---|:---|
| wbmlist | - | 壁体の材料定義リストファイル名 | wbmlist.efl |
| ewname | - | 部位・壁体名。`-<ble>[:<wname>]`形式 | 必須 |
| \<C\> | - | 集熱器・太陽電池の指定 | - |

#### 部位コード（ble）

| コード | 説明 |
|:---|:---|
| E | 外壁 |
| R | 屋根・屋根一体型集熱器および太陽電池 |
| F | 床（外部） |
| i | 内壁 |
| c | 天井（内部） |
| f | 床（内部） |

#### 表面特性パラメータ

| パラメータ | 単位 | 説明 | デフォルト値 |
|:---|:---|:---|:---|
| Ei | - | 室内表面放射率 | 0.9 |
| Eo | - | 外表面放射率 | 0.9 |
| as | - | 外表面日射吸収率 | 0.7 |

#### 集熱器・太陽電池パラメータ

| パラメータ | 単位 | 説明 | デフォルト値 |
|:---|:---|:---|:---|
| type | - | 集熱器のタイプ（A1/A2/A2P/A3/W2） | - |
| tra | - | τα（透過率×吸収率） | - |
| Ksu | W/m²K | 通気層内上側から屋外までの熱貫流率 | - |
| Ksd | W/m²K | 通気層内下側から裏面までの熱貫流率 | - |
| Ru | m²K/W | 通気層から上面までの熱抵抗 | - |
| Rd | m²K/W | 通気層から裏面までの熱抵抗 | - |
| fcu | - | Kcu / Ksu | - |
| fcd | - | Kcd / Ksd | - |
| Kc | - | Kcu + Kcd | - |
| Esu | - | 通気層内上側の放射率 | - |
| Esd | - | 通気層内下側の放射率 | - |
| Eg | - | 透過体の中空層側表面の放射率 | - |
| Eb | - | 集熱版の中空層側表面の放射率 | - |
| ag | - | 透過体の日射吸収率 | - |
| ta | mm | 中空層の厚さ | - |
| tnxt | - | （説明未定義） | - |
| t | mm | 通気層の厚さ | - |

#### 太陽電池パラメータ

| パラメータ | 単位 | 説明 | デフォルト値 |
|:---|:---|:---|:---|
| KHD | - | 日射量年変動補正係数（安全率） | 1.0 |
| KPD | - | 経時変化補正係数 | 0.95 |
| KPM | - | アレイ負荷整合補正係数 | 0.94 |
| KPA | - | アレイ回路補正係数 | 0.97 |
| EffInv | - | インバータ実効効率 | 0.9 |
| apmax | %/℃ | 最大出力温度係数（結晶系：-0.41） | - |
| ap | - | 太陽電池裏面の対流熱伝達率 | - |
| Rcoloff | m²K/W | 通気停止時の集熱器裏面からアレイまでの熱抵抗 | - |

#### 層構成パラメータ

層構成は以下の形式で指定します：
- `<code>[-<L>[/<ND>]]`: 通常の材料層
- `P[:<yyy>]`: 放射暖冷房パネル

| パラメータ | 単位 | 説明 | デフォルト値 |
|:---|:---|:---|:---|
| code | - | 材料コード（[材料定義リスト](wbmlist.md)参照） | 必須 |
| L | mm | 厚み | 必須 |
| ND | - | 分割総数 | - |
| P | - | 放射暖冷房パネルの発熱面位置の指定 | - |
| yyy | - | パネルの熱通過有効度 | 0.7 |

### 層の順序
- **屋根・天井**: （外表面、隣室側、室内側）
- **外壁・内壁・床**: （室内側、外表面、隣室側）

## 使用例

### 基本的な外壁構成
```
WALL
    -E:Ewall RC-150 RWL-50 as1 ALM-2 ;
*
```

### 集熱器付き屋根
```
WALL
    ! 空気集熱器
    -R:Panel <C> type=A1 FPS-120 WDB-22 tra=0.8 Eg=0.9 Eb=0.9 ta=40 ag=0.05 Rd=1.0 t=50 Esu=0.9 Esd=0.9 ;
    ! 予備集熱（鋼板のみなのでRu=0とした）
    -R:Panel2 <C> type=A2 FPS-120 WDB-22 tra=0.9 Ru=0.0 Rd=1.0 t=50 Esu=0.9 Esd=0.9 ;
*
```

### 放射暖冷房パネル付き壁体
```
WALL
    -i:RadiantWall
    concrete-150
    P:0.8
    insulation-100 ;
*
```

### PCM組み込み壁体
```
WALL
    -E:PCMWall
    concrete-100
    PCM_layer-20
    insulation-80
    gypsum-12 ;
*
```

## 材料定義リスト

壁体で使用する材料は、材料定義リストファイル（デフォルト：[wbmlist.efl](wbmlist.md)）で定義されます。

### 特殊材料コード
- `ali`: 内表面熱伝達率
- `alo`: 外表面熱伝達率

## 計算方法

### 熱貫流計算
多層壁体の熱貫流は、各層の熱抵抗を合成して計算されます：
```
R_total = R_surface_in + Σ(L_i / λ_i) + R_surface_out
```

### 集熱器の熱計算
集熱器付き壁体では、日射による集熱効果と通気による熱除去効果を考慮した熱計算が行われます。

### 放射パネルの計算
放射暖冷房パネルでは、パネル位置での熱注入・除去と壁体内の熱伝導を連成して計算します。

## 出力データ

壁体の計算結果として以下の項目が出力されます：
- 表面温度（室内側・外側）
- 熱流束
- 集熱量（集熱器の場合）
- 発電量（太陽電池の場合）
- パネル熱量（放射パネルの場合）

## 注意事項

1. **層の順序**: 部位によって層の順序が異なるため注意が必要です
2. **材料定義**: 使用する材料は事前に材料定義リストで定義する必要があります
3. **集熱器パラメータ**: 集熱器を使用する場合は、適切な物性値の設定が重要です
4. **分割数**: 計算精度を向上させるため、厚い層では適切な分割数を設定してください
5. **PCM組み込み**: PCM材料を使用する場合は、事前にPCM定義が必要です