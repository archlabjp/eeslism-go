# 6. Go言語版特有の機能

## 6.1 ビルドと実行

### 6.1.1 基本的なビルド
```bash
go build
```

### 6.1.2 クロスプラットフォームビルド

#### Windows 64bit版
```bash
GOOS=windows GOARCH=amd64 go build -o eeslism.exe
```

#### WebAssembly版
```bash
GOOS=js GOARCH=wasm go build -o eeslism.wasm
```

#### その他のプラットフォーム
Go言語がサポートする全てのプラットフォームでビルド可能です。詳細は[Go公式ドキュメント](https://go.dev/doc/install/source#environment)を参照してください。

## 6.2 WebAssembly対応

Go言語版EESLISMは、WebAssembly（WASM）形式でビルドすることで、ブラウザ上で実行することが可能です。

### 6.2.1 WebAssembly版の特徴
- **ブラウザ実行**: インストール不要でブラウザ上で動作
- **セキュリティ**: サンドボックス環境での安全な実行
- **ポータビリティ**: OS依存なしでの実行

### 6.2.2 制限事項
- ファイルI/Oの制限
- パフォーマンスの若干の低下
- ブラウザのメモリ制限

## 6.3 テスト機能

Go言語版では、自動テストによる品質保証が行われています。

### 6.3.1 テストの実行
```bash
go test ./...
```

### 6.3.2 実装されているテスト
- **標準プランテスト** (`main_test.go`): 標準的な建物モデルの計算テスト
- **日付計算テスト** (`u_day_test.go`): 日付・時刻計算の正確性テスト
- **太陽位置計算テスト** (`u_sun_test.go`): 太陽位置計算の精度テスト

### 6.3.3 テスト結果の確認
テストは継続的インテグレーション（CI）環境で自動実行され、コードの品質が保証されています。

## 6.4 依存関係管理

Go言語版では、Go Modulesによる依存関係管理が行われています。

### 6.4.1 使用している外部ライブラリ
- **argparse** (`github.com/akamensky/argparse`): コマンドライン引数の解析
- **golang.org/x/exp**: Go言語の実験的機能
- **gotest.tools**: テスト支援ライブラリ

### 6.4.2 依存関係の更新
```bash
go mod tidy
go mod download
```

## 6.5 パフォーマンス特性

### 6.5.1 実行速度
- **標準モデル**: 約14秒（19室戸建住宅、1ヶ月助走期間、12ヶ月本計算、30分間隔）
- **C言語版との比較**: ほぼ同等の実行速度

### 6.5.2 メモリ使用量
- **ガベージコレクション**: 自動的なメモリ管理
- **メモリリーク**: Go言語の特性により大幅に削減

### 6.5.3 ベンチマーク例
```
$ time ./eeslism samples/standard-plan-no-hcap-PCM-CM-fsolm.txt
real    0m13.970s
user    0m13.328s
sys     0m1.014s
```

## 6.6 デバッグとトラブルシューティング

### 6.6.1 ログ出力
Go言語版では、マイクロ秒単位のタイムスタンプ付きログが出力されます：
```
log.SetFlags(log.Lmicroseconds)
```

### 6.6.2 よくある問題と解決方法

#### ビルドエラー
- Go言語のバージョンを確認（1.23.0以上推奨）
- `go mod tidy`で依存関係を整理

#### 実行時エラー
- 入力ファイルのパスを確認
- EFLファイルのディレクトリ指定を確認

#### WebAssembly実行時の問題
- ブラウザのメモリ制限を確認
- ファイルアクセス方法の見直し

## 6.7 今後の開発予定

### 6.7.1 計画中の機能
- より詳細なテストカバレッジ
- WebAssembly版の機能拡張
- パフォーマンスの更なる最適化

### 6.7.2 コミュニティ貢献
Go言語版EESLISMはオープンソースプロジェクトです。バグレポート、機能要求、コード貢献を歓迎します。