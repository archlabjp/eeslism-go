# SYSPTH（システム経路データ）

## 概要
SYSPTH（System Path）は、建物の設備システムにおける機器の接続関係と流体の流れを定義するデータセットです。配管中の水やダクト中の空気の流れに沿って機器を配置し、各機器間の接続関係、流量設定、制御方法を詳細に定義することで、複雑な設備システムの動作をシミュレーションできます。

## データ形式
```
SYSPTH
    <経路名>
        -sys <システム分類>
        -f <流体種別>
        > [ name=<末端経路名> ] [ (<流量>) ] [ [<流量比率>] ] <機器1> <機器2> ... <機器N> >
        > [ name=<末端経路名> ] [ (<流量>) ] [ [<流量比率>] ] <機器1> <機器2> ... <機器N> >
        ...
    ;
    ... 繰り返し
*
```

## パラメータ説明

| パラメータ | 説明 | 設定値 | 参照 |
|:---|:---|:---|:---|
| 経路名 | システム経路の識別名 | 任意の文字列 | 必須 |
| システム分類 | システムの用途分類 | `A`: 空調・暖房システム<br>`D`: 給湯システム | 必須 |
| 流体種別 | 循環・通過流体の種類 | `W`: 水系統<br>`A`: 空気系統（温湿度計算）<br>`a`: 空気系統（温度のみ） | 必須 |
| 末端経路名 | 個別経路の識別名 | 任意の文字列 | 任意 |
| 流量 | 基準流量値またはスケジュール名 | 数値またはスケジュール名 | 任意 |
| 流量比率 | 流量の比率設定 | 数値またはスケジュール名 | 任意 |
| 機器 | [SYSCMP](SYSCMP.md)で定義された機器名 | 機器名または機器名[識別子] | 必須 |

## 機器指定の書式

### 基本書式
| 書式 | 説明 | 例 |
|:---|:---|:---|
| `<機器名>` | 基本的な機器指定 | `Boiler1` |
| `<機器名>[<識別子>]` | 複数経路にまたがる機器の経路識別 | `HeatExchanger[H]`, `Tank[C]` |
| `<スケジュール>/<機器名>` | 蓄熱槽の運転スケジュール指定 | `TankSchedule/Tank1` |
| `<機器名>:<補助情報>` | 補助情報付き機器指定 | `Pump1:main` |

### 識別子の用途
- **熱交換器**: `[H]`（高温側）、`[C]`（低温側）
- **蓄熱槽**: `[C]`（蓄熱側）、`[D]`（放熱側）
- **全熱交換器**: `[E]`（排気側）、`[O]`（外気側）

## 使用例

### 基本的な空調システム
```
SYSPTH
    AirConditioningSystem
        -sys A
        -f A
        > name=Supply (2000) OutdoorAir AirHandler[S] VAV Room1 >
        > name=Return Room1 AirHandler[R] >
    ;
*
```

### 温水暖房システム
```
SYSPTH
    HotWaterHeating
        -sys A
        -f W
        > name=Primary (500) Boiler Pump1 HeatExchanger[H] >
        > name=Secondary [0.8] Pump2 HeatExchanger[C] RadiantPanel >
    ;
*
```

### 給湯システム
```
SYSPTH
    DomesticHotWater
        -sys D
        -f W
        > name=HotWaterSupply (100) WaterHeater Pump DHWTank[C] Tap >
        > name=Circulation Tap DHWTank[D] WaterHeater >
    ;
*
```

### 複雑な空調システム
```
SYSPTH
    ComplexAirSystem
        -sys A
        -f A
        > name=OutdoorAir (3000) OutdoorAir HeatRecovery[O] PreHeater >
        > name=ExhaustAir Room1 HeatRecovery[E] ExhaustFan >
        > name=Supply PreHeater MainAirHandler[S] [0.6] VAV1 Room1 >
        > name=Supply2 MainAirHandler[S] [0.4] VAV2 Room2 >
        > name=Return Room1 Room2 MainAirHandler[R] >
    ;
*
```

## 流量設定の考慮事項

### 流量指定が不要な場合
以下のシステムでは流量を指定しません：
- **VAVシステム**: 可変風量制御により自動調整
- **バッチ操作蓄熱槽**: 運転スケジュールにより制御
- **定流量機器**: 機器特性により流量が決定

### 流量比率の活用
```
> [0.6] Branch1 Equipment1 >
> [0.4] Branch2 Equipment2 >
```
分岐経路での流量配分を比率で指定できます。

## システム分類の詳細

### 空調・暖房システム（A）
- 室内環境制御を目的とするシステム
- 空調機、ファンコイル、放射パネル等
- 室温・湿度制御との連携

### 給湯システム（D）
- 給湯供給を目的とするシステム  
- 給湯器、貯湯槽、配管系統等
- 使用量スケジュールとの連携

## 流体種別の選択指針

### 水系統（W）
- 冷温水配管、給湯配管
- 液体の熱輸送を扱う
- 密度変化は小さい

### 空気系統（A）
- 空調ダクト、換気ダクト
- 温度・湿度の両方を計算
- 密度変化を考慮

### 空気系統・温度のみ（a）
- 簡易空気系統
- 温度のみ計算（湿度計算省略）
- 計算負荷軽減

## 設計上の注意事項

1. **機器接続順序**: 実際の流体の流れに沿って機器を配置
2. **分岐・合流**: 複数経路の分岐・合流点を適切に設定
3. **制御連携**: [CONTL](CONTL.md)データとの整合性確保
4. **流量バランス**: 系統全体の流量収支を確認

## 出力データ

システム経路に関する以下の項目が出力されます：
- 各機器の流量
- 各機器の入出口温度・湿度
- システム全体のエネルギー消費量
- 制御状態

## 関連データセット

- [SYSCMP](SYSCMP.md): システム機器の定義
- [CONTL](CONTL.md): 制御ロジックの定義
- [EQPCAT](EQPCAT.md): 機器カタログの定義