# SCHTB（スケジュールテーブル定義）

## 概要
SCHTB（Schedule Table）は、一日の設定値・切替スケジュール、および季節・曜日の定義を行うデータセットです。時刻に応じた温度設定、機器の運転モード切替、季節区分、曜日分類を詳細に定義することで、建物の運用スケジュールを現実的にモデル化できます。エネルギー管理、快適性制御、省エネ運転の基盤となる重要な機能です。

## データ形式
```
SCHTB
    -v <設定値名> <時刻>-(<値>)-<時刻> <時刻>-(<値>)-<時刻> ... ;
    -s <切替名> <時刻>-(<モード>)-<時刻> <時刻>-(<モード>)-<時刻> ... ;
    -ssn <季節名> <開始月/日>-<終了月/日> <開始月/日>-<終了月/日> ... ;
    -wkd <曜日名> <曜日> <曜日> ... <曜日> ;
    ... 繰り返し
*
```

## パラメータ説明

| パラメータ | 説明 | 設定値 | 参照 |
|:---|:---|:---|:---|
| 設定値名 | 数値スケジュールの識別名 | 任意の文字列 | -v時必須 |
| 切替名 | モード切替スケジュールの識別名 | 任意の文字列 | -s時必須 |
| 季節名 | 季節区分の識別名 | 任意の文字列 | -ssn時必須 |
| 曜日名 | 曜日グループの識別名 | 任意の文字列 | -wkd時必須 |
| 時刻 | 時分（HHMM形式） | 0000-2400 | スケジュール定義時必須 |
| 値 | 設定値（温度、流量等） | 数値 | -v時必須 |
| モード | 切替モード名 | 任意の文字列 | -s時必須 |
| 開始月/日 | 期間開始日（MM/DD形式） | 01/01-12/31 | -ssn時必須 |
| 終了月/日 | 期間終了日（MM/DD形式） | 01/01-12/31 | -ssn時必須 |
| 曜日 | 曜日コード | Hol,Sun,Mon,Tue,Wed,Thu,Fri,Sat | -wkd時必須 |

## 定義タイプ一覧

| タイプ | 説明 | 用途 | 例 |
|:---|:---|:---|:---|
| `-v` | 設定値スケジュール | 温度、流量等の数値制御 | 室温設定、風量制御 |
| `-s` | 切替スケジュール | 運転モードの切替 | ON/OFF、冷房/暖房 |
| `-ssn` | 季節設定 | 年間の季節区分 | 冬季、夏季、中間期 |
| `-wkd` | 曜日設定 | 曜日グループ分け | 平日、週末、祝日 |

## 使用例

### 例1: 大規模オフィスビルの年間運用スケジュール
**建物概要**: 20階建てオフィスビル、従業員1,500名、営業時間8:00-18:00
**運用方針**: 働き方改革対応、省エネルギー、快適性確保

```
SCHTB
    !  冬季平日：暖房効率重視の温度設定
    -v WinterOffice_Weekday
        0000-(16.0)-0630    !  深夜：大幅セットバック16℃
        0630-(18.0)-0730    !  予熱開始：段階的昇温18℃
        0730-(20.0)-0800    !  出社準備：快適温度20℃
        0800-(22.0)-1200    !  午前業務：標準快適温度22℃
        1200-(23.0)-1300    !  昼食時間：やや高め23℃（人数増加対応）
        1300-(22.0)-1800    !  午後業務：標準快適温度22℃
        1800-(20.0)-2100    !  残業時間：やや低め20℃（省エネ）
        2100-(18.0)-2400 ;  !  夜間清掃：セットバック18℃
    
    !  夏季平日：冷房効率重視の温度設定
    -v SummerOffice_Weekday
        0000-(30.0)-0630    !  深夜：大幅セットバック30℃
        0630-(28.0)-0730    !  予冷開始：段階的降温28℃
        0730-(26.0)-0800    !  出社準備：快適温度26℃
        0800-(25.0)-1200    !  午前業務：標準快適温度25℃
        1200-(24.0)-1300    !  昼食時間：やや低め24℃（人数増加対応）
        1300-(25.0)-1800    !  午後業務：標準快適温度25℃
        1800-(26.0)-2100    !  残業時間：やや高め26℃（省エネ）
        2100-(28.0)-2400 ;  !  夜間清掃：セットバック28℃
    
    !  空調運転モード：効率的な機器制御
    -s HVAC_Operation_Weekday
        0000-(OFF)-0600     !  深夜：完全停止
        0600-(PREHEAT)-0730 !  予熱運転：暖房のみ
        0730-(PRECOOL)-0800 !  予冷運転：冷房のみ
        0800-(AUTO)-1800    !  自動運転：冷暖房自動切替
        1800-(SETBACK)-2100 !  セットバック：省エネ運転
        2100-(NIGHT)-2400 ; !  夜間運転：最小限運転
    
    !  季節定義：地域気候に応じた設定
    -ssn Winter 11/15-3/15 ;    !  暖房期間：4ヶ月間
    -ssn Summer 6/15-9/15 ;     !  冷房期間：3ヶ月間
    -ssn Inter 3/16-6/14 9/16-11/14 ; !  中間期：春秋各3ヶ月
    
    !  曜日定義：働き方改革対応
    -wkd Weekday Mon Tue Wed Thu Fri ;
    -wkd Weekend Sat Sun ;
    -wkd Holiday Hol ;
*
```

**設計のポイント**:
- **段階制御**: 予熱・予冷で始業時の快適性確保、段階的温度変化で省エネ
- **昼食時間対応**: 人数増加時の温度調整で快適性維持
- **残業時間配慮**: 残業者への配慮と省エネのバランス
- **季節最適化**: 地域気候に応じた暖房・冷房期間設定

### 例2: 高級ホテルの24時間おもてなしスケジュール
**建物概要**: 5つ星ホテル300室、レストラン・宴会場・スパ併設
**運用方針**: 最高の快適性、24時間サービス、エネルギー効率

```
SCHTB
    !  客室：ゲスト快適性最優先
    -v GuestRoom_Comfort
        0000-(22.0)-0600    !  深夜：睡眠快適温度22℃
        0600-(23.0)-0900    !  朝：起床快適温度23℃
        0900-(24.0)-1800    !  日中：活動快適温度24℃
        1800-(23.0)-2200    !  夕方：リラックス温度23℃
        2200-(22.0)-2400 ;  !  夜：睡眠準備温度22℃
    
    !  レストラン：食事環境重視
    -v Restaurant_Dining
        0600-(20.0)-0700    !  早朝準備：スタッフ作業温度20℃
        0700-(22.0)-1000    !  朝食時間：食事快適温度22℃
        1000-(21.0)-1130    !  準備時間：やや低め21℃
        1130-(23.0)-1400    !  昼食時間：食事快適温度23℃
        1400-(21.0)-1730    !  準備時間：やや低め21℃
        1730-(23.0)-2200    !  夕食時間：食事快適温度23℃
        2200-(20.0)-2400    !  清掃時間：作業温度20℃
        2400-(20.0)-0600 ;  !  深夜：最小限20℃
    
    !  宴会場：イベント対応可変制御
    -s Banquet_EventControl
        0000-(STANDBY)-0800  !  深夜：待機モード
        0800-(SETUP)-1000    !  準備：セットアップモード
        1000-(EVENT)-1200    !  午前イベント：イベントモード
        1200-(BREAK)-1400    !  休憩：ブレイクモード
        1400-(EVENT)-1700    !  午後イベント：イベントモード
        1700-(BREAK)-1900    !  休憩：ブレイクモード
        1900-(EVENT)-2200    !  夜間イベント：イベントモード
        2200-(CLEANUP)-2400 ; !  清掃：クリーンアップモード
    
    !  スパ：リラクゼーション環境
    -v Spa_Relaxation
        0600-(26.0)-0800    !  早朝：準備温度26℃
        0800-(28.0)-2200    !  営業時間：リラックス温度28℃
        2200-(25.0)-2400    !  清掃時間：作業温度25℃
        2400-(24.0)-0600 ;  !  深夜：維持温度24℃
*
```

**設計のポイント**:
- **24時間快適性**: ゲストの滞在時間全体での最適環境
- **食事環境**: 食事の種類・時間帯に応じた温度設定
- **イベント対応**: 宴会・会議の内容に応じた可変制御
- **リラクゼーション**: スパ・温浴施設の特殊環境対応

### 例3: 製造工場の生産効率最大化スケジュール
**建物概要**: 自動車部品工場、3交代24時間稼働、品質管理重要
**運用方針**: 生産効率最大化、品質安定、作業者安全

```
SCHTB
    !  生産エリア：3交代対応温度管理
    -v Production_3Shift
        0000-(20.0)-0600    !  夜勤：作業快適温度20℃
        0600-(21.0)-0800    !  交代時間：やや高め21℃
        0800-(22.0)-1600    !  日勤：標準作業温度22℃
        1600-(21.0)-1800    !  交代時間：やや高め21℃
        1800-(20.0)-2200    !  夕勤：作業快適温度20℃
        2200-(19.0)-2400 ;  !  交代時間：やや低め19℃
    
    !  品質管理室：精密環境制御
    -v QualityControl_Precision
        0000-(20.0)-2400 ;  !  24時間一定：精密測定環境20℃±0.5℃
    
    !  塗装ブース：工程連動制御
    -s PaintBooth_Process
        0000-(STANDBY)-0600  !  深夜：待機モード
        0600-(PREHEAT)-0700  !  予熱：ブース昇温
        0700-(PAINT)-1200    !  午前塗装：塗装モード
        1200-(CURE)-1300     !  乾燥：硬化モード
        1300-(PAINT)-1700    !  午後塗装：塗装モード
        1700-(CURE)-1800     !  乾燥：硬化モード
        1800-(PAINT)-2200    !  夜間塗装：塗装モード
        2200-(CURE)-2400 ;   !  乾燥：硬化モード
    
    !  電力デマンド制御：ピークカット
    -s PowerDemand_Control
        0000-(NORMAL)-1300   !  通常：標準運転
        1300-(LIMIT)-1600    !  ピーク時間：制限運転
        1600-(NORMAL)-2400 ; !  通常：標準運転
    
    !  交代勤務対応曜日定義
    -wkd Weekday Mon Tue Wed Thu Fri ;
    -wkd Weekend Sat Sun ;
    -wkd Maintenance Hol ; !  祝日はメンテナンス日
*
```

**設計のポイント**:
- **3交代対応**: 各勤務時間帯の作業効率最大化
- **品質管理**: 精密測定に必要な安定環境維持
- **工程連動**: 塗装・乾燥工程に応じた最適制御
- **デマンド制御**: 電力ピーク時間帯の負荷制限

### 例4: 学校の教育環境最適化スケジュール
**建物概要**: 小中一貫校、児童生徒800名、地域開放施設併設
**運用方針**: 学習効率向上、健康配慮、地域貢献

```
SCHTB
    !  普通教室：学習効率重視
    -v Classroom_Learning
        0000-(16.0)-0700    !  深夜：省エネ温度16℃
        0700-(18.0)-0800    !  登校準備：段階昇温18℃
        0800-(20.0)-1200    !  午前授業：学習最適温度20℃
        1200-(21.0)-1300    !  昼食時間：やや高め21℃
        1300-(20.0)-1500    !  午後授業：学習最適温度20℃
        1500-(19.0)-1800    !  放課後：やや低め19℃
        1800-(17.0)-2200    !  地域開放：省エネ温度17℃
        2200-(16.0)-2400 ;  !  夜間：省エネ温度16℃
    
    !  体育館：運動・イベント対応
    -v Gymnasium_MultiPurpose
        0700-(15.0)-0900    !  朝練：運動適温15℃
        0900-(18.0)-1200    !  体育授業：運動快適温度18℃
        1200-(16.0)-1300    !  昼休み：やや低め16℃
        1300-(18.0)-1500    !  体育授業：運動快適温度18℃
        1500-(15.0)-1800    !  部活動：運動適温15℃
        1800-(20.0)-2100    !  地域開放：一般利用温度20℃
        2100-(12.0)-2400    !  夜間：省エネ温度12℃
        2400-(12.0)-0700 ;  !  深夜：省エネ温度12℃
    
    !  給食室：衛生管理重視
    -s Kitchen_HygieneControl
        0000-(OFF)-0500     !  深夜：完全停止
        0500-(PREP)-0800    !  準備：下処理モード
        0800-(COOK)-1100    !  調理：調理モード
        1100-(SERVE)-1300   !  配膳：配膳モード
        1300-(CLEAN)-1500   !  清掃：清掃モード
        1500-(OFF)-2400 ;   !  停止：完全停止
    
    !  学校年間スケジュール
    -ssn School_Winter 12/1-2/28 ;     !  冬季：暖房期間
    -ssn School_Summer 7/1-8/31 ;      !  夏季：夏休み期間
    -ssn School_Spring 4/1-6/30 ;      !  春季：新学期
    -ssn School_Autumn 9/1-11/30 ;     !  秋季：2学期
    
    !  学校特有曜日定義
    -wkd SchoolDay Mon Tue Wed Thu Fri ; !  授業日
    -wkd Weekend Sat Sun ;               !  週末
    -wkd Holiday Hol ;                   !  祝日・長期休暇
*
```

**設計のポイント**:
- **学習環境**: 集中力向上に最適な温度設定（20℃±1℃）
- **運動環境**: 体育・部活動に適した温度設定（15-18℃）
- **衛生管理**: 給食調理の食品安全確保
- **地域開放**: 学校施設の地域利用への対応

## 時刻指定の詳細

### 時刻形式
- **HHMM形式**: 0000（0時0分）～2400（24時0分）
- **連続性**: 前の時刻の終了時刻が次の開始時刻
- **日跨ぎ**: 2400を超える場合は翌日扱い

### スケジュール区間
```
0800-(22.0)-1800
```
- 8時00分から18時00分まで22.0℃に設定

### 複数区間の定義
```
0600-(18.0)-0800 0800-(22.0)-1800 1800-(20.0)-2400
```
- 6時～8時: 18.0℃
- 8時～18時: 22.0℃  
- 18時～24時: 20.0℃

## 季節定義の詳細

### 基本的な季節区分
```
-ssn Winter 12/1-2/28 ;
-ssn Summer 6/1-8/31 ;
-ssn Inter 3/1-5/31 9/1-11/30 ;
```

### 複数期間の指定
```
-ssn Inter 4/1-5/31 10/1-11/30 ;
```
中間期を春（4月～5月）と秋（10月～11月）に分けて定義

### 地域特性の考慮
```
-ssn Winter_Hokkaido 10/15-4/30 ;
-ssn Winter_Kyushu 12/15-2/28 ;
```

## 曜日定義の詳細

### 基本的な曜日グループ
```
-wkd Weekday Mon Tue Wed Thu Fri ;
-wkd Weekend Sat Sun ;
-wkd Holiday Hol ;
```

### 特殊な曜日グループ
```
-wkd BusinessDay Mon Tue Wed Thu Fri ;
-wkd RestDay Sat Sun Hol ;
-wkd FullWeek Mon Tue Wed Thu Fri Sat Sun ;
```

## インライン定義

### %s記法による任意場所での定義
```
%s -v QuickTemp 0800-(22.0)-1800 ;
%s -s QuickMode 0800-(ON)-1800 ;
```

### 利用場面
- 他のデータセット内での即座定義
- 一時的なスケジュール設定
- テスト用の簡易設定

## 省エネルギー設定例

### ピークカット対応
```
SCHTB
    -v SummerPeakCut
        0000-(26.0)-1300 1300-(28.0)-1600 1600-(26.0)-2400 ;
    
    -s PeakCutMode
        0000-(NORMAL)-1300 1300-(PEAKCUT)-1600 1600-(NORMAL)-2400 ;
*
```

### 夜間電力活用
```
SCHTB
    -s NightPowerMode
        0000-(NIGHT)-0800 0800-(DAY)-2200 2200-(NIGHT)-2400 ;
    
    -v NightHeating
        2200-(25.0)-0800 0800-(20.0)-2200 ;
*
```

## 設計上の注意事項

1. **時刻の連続性**: 24時間をすべてカバーする設定
2. **季節の網羅性**: 年間365日をすべて季節に分類
3. **現実的な設定値**: 実際の運用に即した温度・モード設定
4. **省エネ配慮**: エネルギー効率を考慮したスケジュール

## デバッグとテスト

### スケジュール確認
1. **時系列グラフ**: 設定値の時間変化を可視化
2. **季節移行**: 季節変更日の動作確認
3. **曜日切替**: 曜日による適切な切替

### 出力データでの検証
- スケジュール値の実際の適用状況
- エネルギー消費パターンとの整合性
- 快適性指標との関係

## 関連データセット

- [SCHNM](SCHNM.md): スケジュール名定義での参照
- [WEEK](WEEK.md): 週間カレンダーとの連携
- [RESI](RESI.md): 居住者スケジュールでの活用
- [AAPL](AAPL.md): 照明・機器スケジュールでの活用
- [VENT](VENT.md): 換気スケジュールでの活用
- [CONTL](CONTL.md): 制御ロジックでの参照